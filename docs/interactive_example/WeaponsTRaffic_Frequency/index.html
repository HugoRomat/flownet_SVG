<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Weapons Traffic</title>

<!--     <script src="lib/three.min.js"></script>
    <script src="lib/jquery.min.js"></script>
    <script src="lib/d3.min.js"></script>
    <script src="lib/cola.min.js"></script> -->
    <script src="Sparkiz.js"></script>

    <script src="lib/three.min.js"></script>
    <script src="lib/jquery.min.js"></script>
    <script src="lib/d3.v3.min.js"></script>
    <script src="lib/cola.min.js"></script>
    <script src="lib/topojson.v1.min.js"></script>


    <!-- <script src="https://d3js.org/topojson.v1.min.js"></script> -->
<!--
    <script src="https://d3js.org/d3.v4.0.0-alpha.50.min.js"></script> -->

    <script src="https://d3js.org/d3.geo.projection.v0.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<!--
    <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
    <link rel='stylesheet prefetch' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css'> -->

    <style>

    body{
      margin:0;
      background-color: #737373;
      font-family: 'Roboto', 'Lato', 'Times';

    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
    svg {
      position: absolute;
      left: 0px;
      top: 0px;
      /*//z-index: 2;*/

    }
    /*.legend_import, .legend_export{
      display: inline-block;
      vertical-align: top;
    }*/

    .graticule {
      fill: none;
      stroke: #777;
      stroke-width: .5px;
      stroke-opacity: .5;
    }


    .boundary {
      fill: none;
      stroke: grey;
      stroke-width: .5px;
    }

/************* POUR LA LEGENDE EN BAS *********/

#slider_year{
  width: 650px;
  height: 5px;
  /*background: #ddd;*/
  border: none;
  border-radius: 3px;

}
#text_label_year{
  text-align: center;
}
    #slider{
      position: absolute;
      left: 30%;
      bottom: 2%;
    }
    #slider ul{
      max-width: 680px;
      list-style: none;
      margin:0;
      /*margin-left: -10px;*/
      padding: 0;
      font-size: 10px;
      margin-top: 10px;
      /*text-align: center;*/

    }
    #slider li{
      display: inline-block;
      position: relative;
      width:20px;
      max-width: 20px;
      vertical-align: top;
      margin-right:13.3px;
      /*transform: rotate(deg);*/
    }

    .legend_import_export {
        position: absolute;
        left: 0px;
        top: 500px;
        /*background-color: blue;*/

      }
/******* POUR LES CHECKBOX ********/
/** RESTE A UPDATER QUAND ON CHANGE SUR LES BOUTTON ***/

  input[type=checkbox]{
      display: none;
  }
  .label span{
    font-size: 70%;
    position: absolute;
    margin-top: -15px;
    width: 100%;
    transform-origin: left top;
    transform: rotate(-45deg);
  }

  .label{
    background-color: rgba(0, 0, 0, 0);
    display: inline-block;
    width: 20px;
    height: 20px;

    border-style: solid;
    border-color: white;
    border-width: 0.1px;

    vertical-align: middle;
    display: inline-block;
  }
  input[type=button]{
    vertical-align: middle;
    display: inline-block;
  }
  input[type=checkbox]:checked + .ammo{
    background-color: #4daf4a;
    background-image: url(images/check.png);
    background-size: 100% 100%;
  }
  input[type=checkbox]:checked + .CiWeapons{
    background-color: #ff7f00;
    background-image: url(images/check.png);
    background-size: 100% 100%;
  }
  input[type=checkbox]:checked + .MilWeapons{
    background-color: #e41a1c;
    background-image: url(images/check.png);
    background-size: 100% 100%;
  }


/********* SLIDER *********/
  input[type=range] {
  box-sizing: border-box;
  font-size: 16px;
  line-height: 5;
  height: 50em;
  background-color: transparent;
  cursor: pointer;
  -webkit-appearance: none;
  width: 100%;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
}
input[type=range]:focus {
  outline: none;
}
input[type=range]::-ms-track {
  width: 100%;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 1em;
  height: 1em;
  margin-top: 0;
  background-color: #16a085;
  border-radius: 1em;
  border: 2px solid rgba(255, 255, 255, 0.5);
  cursor: pointer;
}
input[type=range]::-moz-range-thumb {
  width: 2em;
  height: 2em;
  margin-top: 0;
  background-color: #16a085;
  border-radius: 1em;
  border: 2px solid rgba(255, 255, 255, 0.5);
  cursor: pointer;
}
input[type=range]::-ms-thumb {
  width: 2em;
  height: 2em;
  margin-top: 0;
  background-color: #16a085;
  border-radius: 1em;
  border: 2px solid rgba(255, 255, 255, 0.5);
  cursor: pointer;
}
input[type=range]:hover::-webkit-slider-thumb {
  border-color: rgba(255, 255, 255, 0.7);
}
input[type=range]:hover::-moz-range-thumb {
  border-color: rgba(255, 255, 255, 0.7);
}
input[type=range]:hover::-ms-thumb {
  border-color: rgba(255, 255, 255, 0.7);
}
input[type=range]:active::-webkit-slider-thumb {
  border-color: #ffffff;
}
input[type=range]:active::-moz-range-thumb {
  border-color: #ffffff;
}
input[type=range]:active::-ms-thumb {
  border-color: #ffffff;
}
input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  cursor: pointer;
  height: 0.6em;
  border-bottom: 2px solid rgba(255, 255, 255, 0.5);
  background-color: transparent;
}
input[type=range]::-moz-range-track {
  width: 100%;
  cursor: pointer;
  height: 1em;
  border-bottom: 2px solid rgba(255, 255, 255, 0.5);
  background-color: transparent;
}
input[type=range]::-ms-track {
  background: transparent;
  border-color: transparent;
  color: transparent;
}
#legend1{
          position: absolute;
          top: 10%;
          width: 30%;
          /* text-align: center; */
          font-style: italic;
          font-size: 19px;
          margin-left: 10%;
          /*background-color: rgba(0,0,0,0)*/
          background-color: rgba(163, 163, 163, 0.5);
    padding: 15px;
        }


    </style>


</head>
<body>
  <svg>
    <g id="legend" transform="translate(10,300)"></g>
  </svg>
  <div id="visFrame"> </div>
  <div id="legend1">
    Imports and exports of arms between countries (<a href="https://raw.githubusercontent.com/dataarts/armsglobe/master/categories/All.json">dataset</a>). Particles flow from one country to another. Their color and frequency respectively encode the type (ammunitions, civil weapons or military weapons) and the volume of arms that go from one country to another.
    </div>
    <div class="bandeau-top" style="position:absolute; top:0%;width:100%; height:20px; background-color:black; color:white; text-align: center; padding:7px;">
     Optimized for Chrome
     </div>

  <div class="legend_import_export">
    <div class="legend_import">
          <!-- <span>
            <input type="button" value="Import" id="slideImport" name="check" />
          </span> -->
          <span>
            Import
          </span>
          <input type="checkbox" class="import " value="None" id="slideImportAmmo" name="check" />
          <label class="label ammo" for="slideImportAmmo"><span>Ammo</span></label>

          <input type="checkbox" class="import" value="None" id="slideImportCiWeapons" name="check" />
          <label class="label CiWeapons" for="slideImportCiWeapons"><span>Civil Weapons</span></label>

          <input type="checkbox" class="import" value="None" id="slideImportMilWeapons" name="check" />
          <label class="label MilWeapons" for="slideImportMilWeapons"><span>Mil Weapons</span></label>
    </div>
    <div class="legend_export">
          <!-- <input type="button" value="Export" id="slideExport" name="check"/> -->
          <span>
            Export
          </span>
          <input type="checkbox" class="export" value="None" id="slideExportAmmo" name="check" checked>
          <label class="label ammo" for="slideExportAmmo"></label>

          <input type="checkbox" class="export" value="None" id="slideExportCiWeapons" name="check" checked>
          <label class="label CiWeapons" for="slideExportCiWeapons"></label>

          <input type="checkbox" class="export" value="None" id="slideExportMilWeapons" name="check" checked>
          <label class="label MilWeapons" for="slideExportMilWeapons"></label>

    </div>
  </div>

  <div id="slider">
    <div id="text_label_year">
      2000
    </div>
    <div id="year_selection">
      <input type="range" id="slider_year" value="2000" max="2010" min="1992" step="1" />
    </div>
    <ul>
      <li>92</li>
      <li>93</li>
      <li>94</li>
      <li>95</li>
      <li>96</li>
      <li>97</li>
      <li>98</li>
      <li>99</li>
      <li>00</li>
      <li>01</li>
      <li>02</li>
      <li>03</li>
      <li>04</li>
      <li>05</li>
      <li>06</li>
      <li>07</li>
      <li>08</li>
      <li>09</li>
      <li>10</li>
    </ul>

  </div>





  <script>

  /*
	930100 – military weapons, and includes some light weapons and artillery as well as machine guns and assault rifles etc.
	930190 – military firearms – eg assault rifles, machineguns (sub, light, heavy etc), combat shotguns, machine pistols etc
	930200 – pistols and revolvers
	930320 – Sporting shotguns (anything that isn’t rated as a military item).
	930330 – Sporting rifles (basically anything that isn’t fully automatic).
	930621 – shotgun shells
	930630 – small caliber ammo (anything below 14.5mm which isn’t fired from a shotgun.
*/

//	a list of weapon 'codes'
//	now they are just strings of categories
//	Category Name : Category Code
// var weaponLookup = {
// 	'Military Weapons' 		: 'mil',
// 	'Civilian Weapons'		: 'civ',
// 	'Ammunition'			: 'ammo',
// };
var categoryColors = {
'mil' : "#e41a1c", // RED
'civ' : "#ff7f00", // ORANGE
'ammo' : "#1a9850", // VERT
'930330' : "#984ea3"
}

var temp_scale = {
  'mil':0.0,
  'civ':0.3,
  'ammo':0.6,
  '930330':0.6
}
var freq_scale = {
  'mil':0.5,
  'civ':1,
  'ammo':4,
  '930330':0.6
}

  var size_scale = d3.scale.linear()
                    .domain([2000,800000, 1000000])
                    .range([10,25,40])
  var freq_scale = d3.scale.linear()
                    .domain([2000,800000, 1000000000])
                    .range([0.2, 1.5 ,3])
   var speed_scale = d3.scale.linear()
                    .domain([2000,800000, 1000000])
                    .range([1,5,10])


 //

  var app;
  var max = 0;
  
  var country_selected;
  var year_selected = 2000;
  var DATA_JSON;

  var countries;
  var country_iso_to_name;
  var country_name_to_iso;

  var importation = false;
  var exportation = true;

  var ImportAmmo = false;
  var ImportCiWeapons = false;
  var ImportMilWeapons = false;

  var ExportAmmo = true;
  var ExportCiWeapons = true;
  var ExportMilWeapons = true;


  var dataset = null;
  var dataset_year = null;

  var proj = d3.geo.miller()
                    .scale(328)
                    .translate([-50,-10]);


  var size_scale = d3.scale.linear()
                   .domain([2000,800000, 8000000])
                   .range([10,30, 50])



function get_Data(year, country){

  var temporary_dataset = dataset.filter(function (d) { return d.t == year });
  var DATA = [];
  DATA["links"] = [];
  DATA["nodes"] = [];
  var NODES = [];
  var id_nodes = 0;
  temporary_dataset = temporary_dataset[0];

  console.log(temporary_dataset.data)
  for (var i =0; i< temporary_dataset.data.length; i++){
    var b = temporary_dataset.data[i];
    // GET THE DATASET

    // JUSTE POUR LES EXPORTS
    // A FAIRE L'IMPORT
    if (b.i.toUpperCase() == country.toUpperCase() && country_name_to_iso[b.i.toUpperCase()] != undefined && country_name_to_iso[b.e.toUpperCase()] != undefined){
      if (ImportAmmo) {
        //console.log(b.wc)
        if (b.wc == "ammo" ) {
          if (NODES[country_name_to_iso[b.e.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.e.toUpperCase()]] = id_nodes; 
            id_nodes+=1;
          }
          if (NODES[country_name_to_iso[b.i.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.i.toUpperCase()]] = id_nodes; 
            id_nodes+=1; 
          }
          DATA["links"].push({"type": "ammo", "amount": b.v, "source": NODES[country_name_to_iso[b.e.toUpperCase()]], "target": NODES[country_name_to_iso[b.i.toUpperCase()]]}); 
        } 
      }
      if (ImportCiWeapons) {
        if (b.wc == "civ" ) {
          if (NODES[country_name_to_iso[b.e.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.e.toUpperCase()]] = id_nodes; 
            id_nodes+=1;
          }
          if (NODES[country_name_to_iso[b.i.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.i.toUpperCase()]] = id_nodes; 
            id_nodes+=1; 
          }
          console.log(id_nodes)
          console.log(b.e.toUpperCase())
          console.log(country_name_to_iso[b.e.toUpperCase()])
          DATA["links"].push({"type": "civ", "amount": b.v, "source": NODES[country_name_to_iso[b.e.toUpperCase()]], "target": NODES[country_name_to_iso[b.i.toUpperCase()]]}); 
        }
      }
      if (ImportMilWeapons) {
        if (b.wc == "mil" ) {
          if (NODES[country_name_to_iso[b.e.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.e.toUpperCase()]] = id_nodes; 
            id_nodes+=1;
          }
          if (NODES[country_name_to_iso[b.i.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.i.toUpperCase()]] = id_nodes; 
            id_nodes+=1; 
          }
          DATA["links"].push({"type": "mil", "amount": b.v, "source": NODES[country_name_to_iso[b.e.toUpperCase()]], "target": NODES[country_name_to_iso[b.i.toUpperCase()]]}); 
        }  
      } 
    }
    if (b.e.toUpperCase() == country.toUpperCase() && country_name_to_iso[b.e.toUpperCase()] != undefined && country_name_to_iso[b.i.toUpperCase()] != undefined){
      if (ExportAmmo) {
        //console.log(b.wc)
        if (b.wc == "ammo" ) {
          if (NODES[country_name_to_iso[b.e.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.e.toUpperCase()]] = id_nodes; 
            id_nodes+=1;
          }
          if (NODES[country_name_to_iso[b.i.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.i.toUpperCase()]] = id_nodes; 
            id_nodes+=1; 
          }
          DATA["links"].push({"type": "ammo", "amount": b.v, "source": NODES[country_name_to_iso[b.e.toUpperCase()]], "target": NODES[country_name_to_iso[b.i.toUpperCase()]]}); 
        } 
      }
      if (ExportCiWeapons) {
        if (b.wc == "civ" ) {
          if (NODES[country_name_to_iso[b.e.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.e.toUpperCase()]] = id_nodes; 
            id_nodes+=1;
          }
          if (NODES[country_name_to_iso[b.i.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.i.toUpperCase()]] = id_nodes; 
            id_nodes+=1; 
          }
          console.log(id_nodes)
          console.log(b.i.toUpperCase())
          console.log(country_name_to_iso[b.i.toUpperCase()])
          DATA["links"].push({"type": "civ", "amount": b.v, "source": NODES[country_name_to_iso[b.e.toUpperCase()]], "target": NODES[country_name_to_iso[b.i.toUpperCase()]]}); 
        }
      }
      if (ExportMilWeapons) {
        if (b.wc == "mil" ) {
          if (NODES[country_name_to_iso[b.e.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.e.toUpperCase()]] = id_nodes; 
            id_nodes+=1;
          }
          if (NODES[country_name_to_iso[b.i.toUpperCase()]] == undefined) {
            NODES[country_name_to_iso[b.i.toUpperCase()]] = id_nodes; 
            id_nodes+=1; 
          }
          DATA["links"].push({"type": "mil", "amount": b.v, "source": NODES[country_name_to_iso[b.e.toUpperCase()]], "target": NODES[country_name_to_iso[b.i.toUpperCase()]]}); 
        }  
      }    
    }
  }
  // CREE UN TABLEAU DE LA TAILLE VOULUE
  DATA["nodes"] = Array.apply(null, Array(NODES.length)).map(Number.prototype.valueOf,0);
  // MET CHAQUE NOEUDS DANS CHAQUE CASE DU TABLEAU
  var i = 0;
  console.log(NODES)
  for(var key in NODES){
    if (key != "undefined"){
      //console.log(NODES[key])
      DATA["nodes"][NODES[key]] = {"id":i,"name": key, "lat": countries[String(key)].lat, "lon": countries[String(key)].lon};
      i++;
    }
  }
  //console.log(DATA)
  return DATA;
}

// PERMET DE FLIPPER L'ARRAY
function array_flip( trans )
{
    var key, tmp_ar = {};
    for ( key in trans ){
        if ( trans.hasOwnProperty( key ) ){
            tmp_ar[trans[key]] = key;
        }
    }
    return tmp_ar;
}


app = Sparkiz.force("#visFrame", 1800,1000,"#abd9e9", 0)
 .nodes([{
    "name": "SWE",
    "lat": "62",
    "lon": "15"
  }, {
    "name": "NOR",
    "lat": "62",
    "lon": "10"
  }])
 .links([{
    "target": 1,
    "temporal": [0.0],
    "source": 0,
    "frequency": 1,
    "spatial" : [0],
    "speed": 1,
    "id": 0
  }])
 .layout("linkDistance", 300)
 .create_layout()
 .zoom(true)
 .controls(true)
 .roads_mapping("number_roads", 1 )
 .links_mapping("courbure", 5)
 .create_WEBGL_element()
 .links_mapping("opacity", 0)
 .particle_mapping("opacity", 0.0)
 .particle_mapping("texture", "images/rectangle_texture.png")
 .start(0);
  
  app.sparkiz.draw_map(proj, 'data/worldID.json');

 app.viz._UI.callback = function(f){
    console.log("J'ai cliqué sur ", f);
    var name_country_selected = f.name.slice(0, 2);
    console.log(country_iso_to_name, name_country_selected.toUpperCase())

    country_selected = country_iso_to_name[name_country_selected.toUpperCase()];
    console.log("YOUHOU CeST LA ", country_selected)
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
 }

 d3.json("data/weapons/ammo.json", function(json) {

  console.log(json);
  dataset = json.timeBins;

  d3.json("data/countries_lat_long.json", function(countr) {
    // AB :key
    // LONG-LAT : value
    countries = countr.countries;

    d3.json("data/country.json", function(countr_iso) {
      // AB :key
      // LONG-LAT : value
      country_iso_to_name = countr_iso;
      country_name_to_iso = array_flip(country_iso_to_name);
      // TRANSFORME LE PAYS EN NOM COMPLET

      country_selected = country_iso_to_name["GR"];
      DATA_JSON = get_Data(year_selected, country_selected);
      update(year_selected, "GR", DATA_JSON);
      //console.log(country_name_to_iso,country_iso_to_name)
      console.log(DATA_JSON)
    });
  });
});

function update(year, country, json){
   console.log(year, country)

  // DELETE EVERYTHING
  for( var i = app.sparkiz.scene.children.length - 1; i >= 0; i--) {
    obj = app.sparkiz.scene.children[i];
    if (obj.name == "links") app.sparkiz.scene.remove(obj);
    if (obj.name == "roads") app.sparkiz.scene.remove(obj);
    if (obj.name.slice(0, 4) ==  "tube") app.sparkiz.scene.remove(obj);
    if (obj.name.slice(0, 15) == "particle_system") app.sparkiz.scene.remove(obj);
    if (obj.name == "circle") app.sparkiz.scene.remove(obj);
    if (obj.name == "label") app.sparkiz.scene.remove(obj);
  }
  app.sparkiz.links = []
  app.sparkiz.tube = []

  console.log(json)
  // LAUNCH THE UPDATE
  app.links(json.links)
  .nodes(json.nodes)
  .create_layout()
  .roads_mapping("number_roads", 1 )
  .links_mapping("courbure", 5)
  .create_WEBGL_element()
  .links_mapping("color", "#fee08b")
  .links_mapping("size", 1)
  .links_mapping("opacity", 0.3)
  .roads_mapping("opacity", 0)
  .nodes_mapping("label", function(d, i) {return country_iso_to_name[d.name]; })
  .nodes_mapping("label_color", "black")
  .nodes_mapping("size",  1)
  .nodes_mapping("color", "#000000")
  //.nodes_mapping("opacity", 0)
  .particle_mapping("opacity_0", 0.0)

  .nodes_mapping("x", function(d, i) {return proj([d.lon,d.lat])[0]; })
  .nodes_mapping("y", function(d, i) {return - proj([d.lon,d.lat])[1];  })
  .particle_mapping("color", function(d, i) {return new THREE.Color(categoryColors[d.type]);})
  .particle_mapping("size", 8)
  //.particle_mapping("size", function(d, i) {return size_scale(d.amount);})
  //.particle_mapping("frequency_pattern", function(d, i) { return 0.3; })
  // .particle_mapping("frequency_pattern", 4) //function(d, i) {return [freq_scale[d.type]];})

  // .particle_mapping("temporal_distribution", function(d, i) {return [temp_scale[d.type]];})
  // //.particle_mapping("spatial_distribution", [0])
  // .particle_mapping("velocity", 2)



  //.particle_mapping("frequency_pattern", function(d, i) { return freq_scale(d.amount); })
  .particle_mapping("frequency_pattern",  function(d, i) { return freq_scale(d.amount); })
  .particle_mapping("temporal_distribution", [0.0])
  .particle_mapping("velocity", 1)

  .particle_mapping("texture", "images/rectangle_texture.png")
  .stop()
  .start(0);
}

function isInArray(a, b) {
    return a.indexOf(b) != -1
}

/**************** IMPORT *************************/
  $("#slideImportAmmo").click(function(event) {
    ImportAmmo = !ImportAmmo;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
  });
  $("#slideImportCiWeapons").click(function(event) {
    ImportCiWeapons = !ImportCiWeapons;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
  });
  $("#slideImportMilWeapons").click(function(event) {
    ImportMilWeapons = !ImportMilWeapons;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
  });
/**************** EXPORT *************************/
  $("#slideExportAmmo").click(function(event) {
    ExportAmmo = !ExportAmmo;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
  });
  $("#slideExportCiWeapons").click(function(event) {
    ExportCiWeapons = !ExportCiWeapons;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
  });
  $("#slideExportMilWeapons").click(function(event) {
    ExportMilWeapons = !ExportMilWeapons;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
  });
 // SLIDER //
  $('#slider_year').change(function() {
    year_dataset = $(this).val();
    year_selected = year_dataset;
    DATA_JSON = get_Data(year_selected, country_selected);
    update(year_selected, country_selected, DATA_JSON);
    //console.log(yo)
  });
  $('#slider_year').on('input', function () {
    var year_label = $(this).val();
    $( "#text_label_year" ).text(year_label);
});




  </script>
</body>
</html>
